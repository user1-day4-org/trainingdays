<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>üíé Breakout 1:  Deploy the sample application with GitHub workflows üíé | Azure Developer College</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/trainingdays/assets/css/0.styles.8d7a09fd.css" as="style"><link rel="preload" href="/trainingdays/assets/js/app.b4a8c541.js" as="script"><link rel="preload" href="/trainingdays/assets/js/3.da874b83.js" as="script"><link rel="preload" href="/trainingdays/assets/js/32.072a342a.js" as="script"><link rel="prefetch" href="/trainingdays/assets/js/10.e44c6d2b.js"><link rel="prefetch" href="/trainingdays/assets/js/11.8d5d356c.js"><link rel="prefetch" href="/trainingdays/assets/js/12.6778aae7.js"><link rel="prefetch" href="/trainingdays/assets/js/13.b0949e4a.js"><link rel="prefetch" href="/trainingdays/assets/js/14.45d2e82e.js"><link rel="prefetch" href="/trainingdays/assets/js/15.53ef245a.js"><link rel="prefetch" href="/trainingdays/assets/js/16.5219bfbe.js"><link rel="prefetch" href="/trainingdays/assets/js/17.7b5a88ba.js"><link rel="prefetch" href="/trainingdays/assets/js/18.05cc6b87.js"><link rel="prefetch" href="/trainingdays/assets/js/19.ea8f1e35.js"><link rel="prefetch" href="/trainingdays/assets/js/2.4daa04a4.js"><link rel="prefetch" href="/trainingdays/assets/js/20.799f221d.js"><link rel="prefetch" href="/trainingdays/assets/js/21.bb9bc3fb.js"><link rel="prefetch" href="/trainingdays/assets/js/22.13605d4a.js"><link rel="prefetch" href="/trainingdays/assets/js/23.38c6577b.js"><link rel="prefetch" href="/trainingdays/assets/js/24.e9097a3e.js"><link rel="prefetch" href="/trainingdays/assets/js/25.671ec9be.js"><link rel="prefetch" href="/trainingdays/assets/js/26.25214aab.js"><link rel="prefetch" href="/trainingdays/assets/js/27.cc73a3b6.js"><link rel="prefetch" href="/trainingdays/assets/js/28.8df30c80.js"><link rel="prefetch" href="/trainingdays/assets/js/29.3feafcdb.js"><link rel="prefetch" href="/trainingdays/assets/js/30.6e77cf4e.js"><link rel="prefetch" href="/trainingdays/assets/js/31.b4e755a1.js"><link rel="prefetch" href="/trainingdays/assets/js/33.39efcbb5.js"><link rel="prefetch" href="/trainingdays/assets/js/34.2e76bcfa.js"><link rel="prefetch" href="/trainingdays/assets/js/35.fd4cb5d8.js"><link rel="prefetch" href="/trainingdays/assets/js/36.714780e7.js"><link rel="prefetch" href="/trainingdays/assets/js/37.00437e67.js"><link rel="prefetch" href="/trainingdays/assets/js/38.b4748e29.js"><link rel="prefetch" href="/trainingdays/assets/js/39.07557fc2.js"><link rel="prefetch" href="/trainingdays/assets/js/4.8c8b7cb9.js"><link rel="prefetch" href="/trainingdays/assets/js/40.02ac8666.js"><link rel="prefetch" href="/trainingdays/assets/js/41.7bc67946.js"><link rel="prefetch" href="/trainingdays/assets/js/42.b754635d.js"><link rel="prefetch" href="/trainingdays/assets/js/43.a465c972.js"><link rel="prefetch" href="/trainingdays/assets/js/44.896d8a0c.js"><link rel="prefetch" href="/trainingdays/assets/js/45.2d998bff.js"><link rel="prefetch" href="/trainingdays/assets/js/46.e4aafd8b.js"><link rel="prefetch" href="/trainingdays/assets/js/47.7d327518.js"><link rel="prefetch" href="/trainingdays/assets/js/48.ed3347cb.js"><link rel="prefetch" href="/trainingdays/assets/js/49.555fd6a8.js"><link rel="prefetch" href="/trainingdays/assets/js/5.8f114f2e.js"><link rel="prefetch" href="/trainingdays/assets/js/50.f6cdcbe7.js"><link rel="prefetch" href="/trainingdays/assets/js/51.818186ab.js"><link rel="prefetch" href="/trainingdays/assets/js/52.1ec80ac0.js"><link rel="prefetch" href="/trainingdays/assets/js/53.705d418f.js"><link rel="prefetch" href="/trainingdays/assets/js/54.50df76f3.js"><link rel="prefetch" href="/trainingdays/assets/js/55.9f9f91d7.js"><link rel="prefetch" href="/trainingdays/assets/js/56.5e6dabe2.js"><link rel="prefetch" href="/trainingdays/assets/js/57.cae1a4f1.js"><link rel="prefetch" href="/trainingdays/assets/js/58.e94d2927.js"><link rel="prefetch" href="/trainingdays/assets/js/59.3b106e81.js"><link rel="prefetch" href="/trainingdays/assets/js/6.c5e21650.js"><link rel="prefetch" href="/trainingdays/assets/js/60.ea90d82b.js"><link rel="prefetch" href="/trainingdays/assets/js/61.113aeff3.js"><link rel="prefetch" href="/trainingdays/assets/js/62.8484b2f2.js"><link rel="prefetch" href="/trainingdays/assets/js/63.ecd38fc0.js"><link rel="prefetch" href="/trainingdays/assets/js/64.4266add8.js"><link rel="prefetch" href="/trainingdays/assets/js/65.8961eae2.js"><link rel="prefetch" href="/trainingdays/assets/js/66.c0903f34.js"><link rel="prefetch" href="/trainingdays/assets/js/67.dca24060.js"><link rel="prefetch" href="/trainingdays/assets/js/68.dbaa6d30.js"><link rel="prefetch" href="/trainingdays/assets/js/69.fabf1117.js"><link rel="prefetch" href="/trainingdays/assets/js/7.a66c3f77.js"><link rel="prefetch" href="/trainingdays/assets/js/70.de883451.js"><link rel="prefetch" href="/trainingdays/assets/js/71.c1e514c9.js"><link rel="prefetch" href="/trainingdays/assets/js/72.76864463.js"><link rel="prefetch" href="/trainingdays/assets/js/73.81e83d2f.js"><link rel="prefetch" href="/trainingdays/assets/js/74.08d88d5c.js"><link rel="prefetch" href="/trainingdays/assets/js/75.8fb23e6c.js"><link rel="prefetch" href="/trainingdays/assets/js/76.2033e175.js"><link rel="prefetch" href="/trainingdays/assets/js/77.ebd187fd.js"><link rel="prefetch" href="/trainingdays/assets/js/78.4a8749de.js"><link rel="prefetch" href="/trainingdays/assets/js/79.f4f61312.js"><link rel="prefetch" href="/trainingdays/assets/js/8.bf08f514.js"><link rel="prefetch" href="/trainingdays/assets/js/80.b0049de9.js"><link rel="prefetch" href="/trainingdays/assets/js/81.ecf9f971.js"><link rel="prefetch" href="/trainingdays/assets/js/82.7e86df87.js"><link rel="prefetch" href="/trainingdays/assets/js/83.add51044.js"><link rel="prefetch" href="/trainingdays/assets/js/84.539663cd.js"><link rel="prefetch" href="/trainingdays/assets/js/85.96331b69.js"><link rel="prefetch" href="/trainingdays/assets/js/86.e9ee1173.js"><link rel="prefetch" href="/trainingdays/assets/js/87.8764cd2a.js"><link rel="prefetch" href="/trainingdays/assets/js/9.b0e56094.js">
    <link rel="stylesheet" href="/trainingdays/assets/css/0.styles.8d7a09fd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/trainingdays/" class="home-link router-link-active"><!----> <span class="site-name">Azure Developer College</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/trainingdays/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/trainingdays/day1/" class="sidebar-link">Day 1 Azure Fundamentals &amp; Infrastructure</a></li><li><a href="/trainingdays/day2/" class="sidebar-link">Day 2 Azure Development</a></li><li><a href="/trainingdays/day3/" class="sidebar-link">Day 3 Data and AI</a></li><li><a href="/trainingdays/day4/" aria-current="page" class="sidebar-link">Day 4 DevOps and Monitoring</a></li><li><a href="/trainingdays/day5/" class="sidebar-link">Day 5 Identity and Architecture</a></li><li><a href="/trainingdays/day6/" class="sidebar-link">Day 6 Containerization</a></li><li><a href="/trainingdays/day7/" class="sidebar-link">Day 7 Kubernetes</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="üíé-breakout-1-deploy-the-sample-application-with-github-workflows-üíé"><a href="#üíé-breakout-1-deploy-the-sample-application-with-github-workflows-üíé" class="header-anchor">#</a> üíé Breakout 1:  Deploy the sample application with GitHub workflows üíé</h1> <p>‚è≤Ô∏è <em>Est. time to complete: 60 min.</em> ‚è≤Ô∏è</p> <h2 id="here-is-what-you-will-learn-üéØ"><a href="#here-is-what-you-will-learn-üéØ" class="header-anchor">#</a> Here is what you will learn üéØ</h2> <p>We have already seen how to create a professional CI/CD workflow with GitHub Actions workflows. Although we have only deployed the shared Azure resources of the sample application so far, we have learned all necessary things to deploy the other bounded contexts to a development and testing environment.</p> <p>In this challenge you will learn how to:</p> <ul><li>deploy all bounded contexts of the sample application</li> <li>see Azure resource tags in action</li> <li>add data to the sample application</li></ul> <h2 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of contents</h2> <ol><li><a href="#plan-your-work">Plan your work</a></li> <li><a href="#prepare-the-workflows">Prepare the workflows</a></li> <li><a href="#create-and-merge-the-pull-request">Create and merge the Pull Request</a></li> <li><a href="#add-data-to-the-sample-application-and-inspect-applicationinsights">Add data to the sample application and inspect ApplicationInsights</a></li></ol> <h2 id="plan-your-work"><a href="#plan-your-work" class="header-anchor">#</a> Plan your work</h2> <p>As in the previous challenges we want to reflect our work for the breakout session on the project board.
We have already created a <em>note</em> on our project board, which says:
<em>Deploy the sample application</em></p> <p>To describe the outstanding work for this breakout session, we create the following issue in the imported trainingdays repository, assign the label <code>azdc-breakout</code> and link it to the <em>note</em>:</p> <div class="language-text extra-class"><pre class="language-text"><code>Deploy all SCM bounded contexts

Prepare GitHub Actions workflows to deploy all SCM bounded contexts.
Deploy all bounded contexts to a development and testing environment.
</code></pre></div><p>After this is done, the project board should look like this:</p> <p><img src="/trainingdays/assets/img/gh-board-overview-07.f28bee47.png" alt="GitHub board overview 07"></p> <h2 id="prepare-the-workflows"><a href="#prepare-the-workflows" class="header-anchor">#</a> Prepare the workflows</h2> <p>Now we have to prepare all extsing workflows. As we pushed changes to the master branch in the previous challenge, we need to pull these changes first:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> checkout master
<span class="token function">git</span> pull
</code></pre></div><p>Then we create a new feature branch for the outstanding work:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch cicd/all
<span class="token function">git</span> checkout cicd/all

<span class="token comment"># or</span>
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> cicd/all
</code></pre></div><p>Now we need to replace the organisation name in each job condition of the following workflows:</p> <ul><li>day4-scm-contactsapi.yml</li> <li>day4-scm-frontend.yml</li> <li>day4-scm-resourcesapi.yml</li> <li>day4-scm-searchapi.yml</li> <li>day4-scm-visitreports.yml</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>üìù In total, five files must be changed. You can check this with the <code>git status</code>command:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> status
On branch cicd/all
Changes not staged <span class="token keyword">for</span> commit:
  <span class="token punctuation">(</span>use <span class="token string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="token punctuation">)</span>
  <span class="token punctuation">(</span>use <span class="token string">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes <span class="token keyword">in</span> working directory<span class="token punctuation">)</span>
	modified:   .github/workflows/day4-scm-contactsapi.yml
	modified:   .github/workflows/day4-scm-frontend.yml
	modified:   .github/workflows/day4-scm-resourcesapi.yml
	modified:   .github/workflows/day4-scm-searchapi.yml
	modified:   .github/workflows/day4-scm-visitreports.yml

no changes added to commit <span class="token punctuation">(</span>use <span class="token string">&quot;git add&quot;</span> and/or <span class="token string">&quot;git commit -a&quot;</span><span class="token punctuation">)</span>
</code></pre></div></div> <p>After this is done, commit and push the changes:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;activate day4 workflows&quot;</span>
<span class="token function">git</span> push --set-upstream origin cicd/all
</code></pre></div><h2 id="create-and-merge-the-pull-request"><a href="#create-and-merge-the-pull-request" class="header-anchor">#</a> Create and merge the Pull Request</h2> <p>Create a pull request to push the changes to the master branch. Close the issue <em>Deploy all SCM bounded contexts</em> with the pull request.
After the pull request is created, wait for all status checks and merge the pull request.</p> <p>After the pull request is merged, navigate to the <code>√Äctions</code> page and observe the workflows.</p> <h2 id="add-data-to-the-sample-application-and-inspect-applicationinsights"><a href="#add-data-to-the-sample-application-and-inspect-applicationinsights" class="header-anchor">#</a> Add data to the sample application and inspect ApplicationInsights</h2> <p>After everything is deployed, we want to add some data to the application in the development environment. Navigate to the Azure portal and go to the resource group for the development environment. The name of the resource group starts with <code>rg-scm-devday4-</code> and end with your GitHub organization name <code>rg-scm-devday4-&lt;your organization name&gt;</code>. We need to find the storage account where the frontend is hosted in a static website. The deployment created some Azure <code>Tags</code> to group the used Azure resources regarding their bounded context. Within the resource group you can set filters in the <code>Resources</code> details view.</p> <p>Apply the following filter:</p> <p><img src="/trainingdays/assets/img/az-frontend-tag-filter.1ce6f61a.png" alt="Azure resource group filter"></p> <p>As a result we see one storage account. Open the storage account and go to the section <code>Static website</code>. Here you can find the primary endpoint of the frontend in the development environment. Copy the URL and open the frontend in your browser.</p> <p>Now add some test data:</p> <ul><li>add some contacts with images</li> <li>add VisitReports</li> <li>add VisitResults</li></ul> <p>After adding the data, let's have a look at ApplicationInsights. Back in the Azure portal, open the ApplicationInsights instance of your development environment <code>rg-scm-devday4-&lt;your organization name&gt;</code>. In the <code>overview</code> page we can already see some useful information about our application in the following diagrams:</p> <ul><li>Failed requests</li> <li>Server response time</li> <li>Server requests</li> <li>Availability (if we had added Availability test)</li></ul> <p>We can click on a diagram to drill down and get more detailed information. Let's see what details we get, when we cklick on the <code>Server response time</code> diagram.
Take some time and investigate which metrics are provided in the Performance View of ApplicationInsights.</p> <p>Check the metrics for:</p> <ul><li>Operations</li> <li>Dependencies</li> <li>Roles</li></ul> <p><img src="/trainingdays/assets/img/appinsights-perf-filter.9f076bbf.png" alt="ApplicationInsights Performance Filter"></p> <p>Now, let's check the samples for the server operation <code>GET/contacts</code>. Select the <code>Operations</code> metrics and the <code>GET/contacts</code> opreation in the list.
Drill into the provided samples:</p> <p><img src="/trainingdays/assets/img/appinsights-op-samples.13730ba7.png" alt="ApplicationInsight operation samples"></p> <p>Select a sample and look at the dependency calls:</p> <p><img src="/trainingdays/assets/img/appinsights-op-dependency.467cd50b.png" alt="ApplicationInsights operation dependencies"></p> <p>Here you can see all calls to external services, such as SQL Database.
If you want to learn more about cross-component transaction, have a look at the documentation <a href="https://docs.microsoft.com/azure/azure-monitor/app/transaction-diagnostics" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Now, navigate to the <code>Application Map</code> of your ApplicationInsights instance. Here you can see the full application topology across multiple levels of related application components.</p> <p><img src="/trainingdays/assets/img/appinsights-applicationmap.75264c56.png" alt="ApplicationInsights application map"></p> <p>If you want to learn more about the <code>Application Map</code> have a look at the documentation <a href="https://docs.microsoft.com/azure/azure-monitor/app/app-map?tabs=net" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="congratulation"><a href="#congratulation" class="header-anchor">#</a> Congratulation</h2> <p>ü•≥ <strong>Congratulation</strong> - You've done it! ü•≥</p> <p><a href="/trainingdays/day4/challenges/05-challenge-common-cicd.html">‚óÄ Previous challenge</a> | <a href="/trainingdays/day4/" class="router-link-active">üîº Day 4</a> |</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azuredevcollege/trainingdays/edit/master/day4/challenges/06-breakout.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/trainingdays/assets/js/app.b4a8c541.js" defer></script><script src="/trainingdays/assets/js/3.da874b83.js" defer></script><script src="/trainingdays/assets/js/32.072a342a.js" defer></script>
  </body>
</html>
